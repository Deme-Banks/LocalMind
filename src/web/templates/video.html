<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalMind - Text to Video</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=2.7">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üé¨ LocalMind Video</h1>
                <p class="subtitle">AI-Powered Text to Video Generation</p>
            </div>
            <div class="header-navigation" style="display: flex; gap: 0.5rem; margin: 0 1rem;">
                <a href="/" class="btn btn-secondary" style="text-decoration: none; padding: 0.5rem 1rem;">
                    <span>üí¨</span> AI Chat
                </a>
                <a href="/video" class="btn btn-primary" style="text-decoration: none; padding: 0.5rem 1rem;">
                    <span>üé¨</span> Text to Video
                </a>
            </div>
            <div class="header-actions">
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span id="statusText">Checking...</span>
                </div>
                <button id="themeToggle" class="btn btn-icon-only" title="Toggle dark mode">
                    <span id="themeIcon">üåô</span>
                </button>
                <div class="header-menu">
                    <button class="btn btn-secondary btn-icon-only" id="headerMenuBtn" onclick="toggleHeaderMenu()" title="Menu">
                        <span>‚ò∞</span>
                    </button>
                    <div class="header-dropdown" id="headerDropdown">
                        <a href="/configure" class="dropdown-item">
                            <span>‚öôÔ∏è</span> Configure APIs
                        </a>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" onclick="showAbout(); closeHeaderMenu();">
                            <span>‚ÑπÔ∏è</span> About
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content" style="display: flex; flex-direction: column; padding: 2rem;">
            <!-- Video Generation Form -->
            <div class="video-generation-panel" style="max-width: 1200px; width: 100%; margin: 0 auto;">
                <div class="card" style="background: var(--surface); border-radius: 0.5rem; padding: 2rem; box-shadow: 0 2px 10px var(--shadow);">
                    <h2 style="margin-bottom: 1.5rem;">Generate Video from Text</h2>
                    
                    <!-- Template Selection -->
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Use Template (Optional)
                        </label>
                        <div style="display: flex; gap: 0.5rem;">
                            <select id="videoTemplateSelect" class="model-select" style="flex: 1; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary);">
                                <option value="">No template (custom prompt)</option>
                            </select>
                            <button id="loadTemplateBtn" class="btn btn-secondary" style="padding: 0.75rem 1rem;" onclick="loadTemplate()">
                                Load Template
                            </button>
                        </div>
                        <small style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.25rem; display: block;">
                            Choose a template to get started quickly, or write your own custom prompt.
                        </small>
                    </div>
                    
                    <!-- Model Selection -->
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="videoModelSelect" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Video Model
                        </label>
                        <select id="videoModelSelect" class="model-select" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary);">
                            <option value="">Loading models...</option>
                        </select>
                    </div>

                    <!-- Prompt Input -->
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="videoPrompt" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Video Prompt
                        </label>
                        <textarea 
                            id="videoPrompt" 
                            rows="4" 
                            placeholder="Describe the video you want to generate... (e.g., 'A serene sunset over a calm ocean with gentle waves')"
                            style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary); font-family: inherit; resize: vertical;"
                        ></textarea>
                        <small style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.25rem; display: block;">
                            Tip: Be descriptive! Include details about style, mood, colors, and motion.
                        </small>
                    </div>

                    <!-- Video Settings -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div class="form-group">
                            <label for="videoDuration" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Duration (seconds)
                            </label>
                            <input 
                                type="number" 
                                id="videoDuration" 
                                min="1" 
                                max="60" 
                                value="5"
                                style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary);"
                            >
                        </div>
                        <div class="form-group">
                            <label for="videoAspectRatio" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Aspect Ratio
                            </label>
                            <select 
                                id="videoAspectRatio" 
                                style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary);"
                            >
                                <option value="">Default</option>
                                <option value="16:9">16:9 (Widescreen)</option>
                                <option value="9:16">9:16 (Vertical)</option>
                                <option value="1:1">1:1 (Square)</option>
                                <option value="4:3">4:3 (Classic)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="videoResolution" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Resolution
                            </label>
                            <select 
                                id="videoResolution" 
                                style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary);"
                            >
                                <option value="">Default</option>
                                <option value="720p">720p</option>
                                <option value="1080p">1080p</option>
                                <option value="4k">4K</option>
                            </select>
                        </div>
                    </div>

                    <!-- Generate Button -->
                    <button 
                        id="generateVideoBtn" 
                        class="btn btn-primary" 
                        style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600;"
                        onclick="generateVideo()"
                    >
                        <span id="generateBtnText">üé¨ Generate Video</span>
                    </button>

                    <!-- Progress Indicator -->
                    <div id="videoProgress" style="display: none; margin-top: 1rem;">
                        <div style="background: var(--surface-light); border-radius: 0.375rem; padding: 1rem; margin-bottom: 0.5rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span id="progressStatus">Processing...</span>
                                <span id="progressPercent">0%</span>
                            </div>
                            <div style="background: var(--border-color); border-radius: 0.25rem; height: 8px; overflow: hidden;">
                                <div id="progressBar" style="background: var(--primary-color); height: 100%; width: 0%; transition: width 0.3s;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Video Gallery -->
                <div class="video-gallery" style="margin-top: 2rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="margin: 0;">Generated Videos</h2>
                        <div style="display: flex; gap: 0.5rem;">
                            <input 
                                type="text" 
                                id="videoSearch" 
                                placeholder="Search videos..." 
                                style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary); font-size: 0.875rem;"
                                oninput="filterVideos(this.value)"
                            >
                            <select 
                                id="videoFilterBackend" 
                                style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: var(--background); color: var(--text-primary); font-size: 0.875rem;"
                                onchange="filterVideosByBackend(this.value)"
                            >
                                <option value="">All Backends</option>
                            </select>
                        </div>
                    </div>
                    <div id="videoGallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
                        <p style="color: var(--text-secondary); text-align: center; grid-column: 1 / -1;">
                            No videos generated yet. Create your first video above!
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/video.js') }}?v=2.1"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}?v=3.0"></script>
</body>
</html>

